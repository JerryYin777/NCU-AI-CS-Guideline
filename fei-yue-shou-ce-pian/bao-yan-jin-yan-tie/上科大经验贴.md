## 上科大和计算所联培 (一生一芯项目组)

项目组是发起、维护 一生一芯这个项目的，详情可看 [一生一芯](https://ysyx.oscc.cc/) 。

- 联培的含意是 毕业证和学位证是上科大的，导师是计算所的。
- 第一年在上科大，后两年可以选择去北京或者留在上海。

### 一面

第一次是在腾讯会议线上面试，基本是课题组的博士生在面。

问：你这个 XV6 是 6.s081 的 lab 吗，这个基于 Logisim 的CPU是 CS61C 的项目吗？XV6 这个内存分配器，你是按照项目的要求写的，还是自己
额外添加了一些功能？

答：是这两个课程的项目，没有添加额外的功能

问：你 XV6 大概写了多长时间

答：断断续续大概写了两个月左右

问：那你还写过其他的公开课吗

答：CS61a, CS61b, 还有CS106L。不过 CS106L 的 作业 没有写，只看了课程的 ppt 学习了现代cpp的特性。

问：应该把 CS106L 的 lab 写一下，我也做过这个课，最后一个作业是让你从头实现一个 HashMap。ppt 我一天就看完了。

答：好的，之前是因为 环境需要 QT， 不太好配。

问：最新版本的可以用 VSCode

答：好的，之后会去尝试。

问：你为什么会做这些公开课呢？因为老师讲的不好吗？

答：对，学校的教材比较陈旧，老师上课又是纯念 ppt，我觉得这不是真正的计算机科学。之后偶然了解了 csdiy.wiki 这个网站，收录了很多公开课。我就按图索骥，找自己喜欢的课程学了。

问：我看你第二项目用的是 Logisim, Logisim 是什么，为什么不使用 Verilog

答：Logisim 是一个电路仿真软件，他和 Verilog 这类硬件描述语言不同，可以使用拖拽的方式搭建电路，比较直观。我也准备之后用 Verilog 来
重写这个 CPU

问：那你有了解过 Verilog 吗？

答：对，之前有去 HDL bits 那个 OJ 上写过10道题。

问：你为什么没坚持做下来，因为太难了吗？

答：当时大三课业繁重，没能坚持。

问：为什么你即有 系统的 项目，又有 深度学习的项目，学这么杂吗。

答：学习深度学习是因为 大三的时候，chatgpt 比较火，而chatgpt 的模型是 transformer, transformer 是基于 卷积神经网络 (其实不是) 的，而卷积神经网络的开山之作就是 AlexNet, RestNet 这些。不过学完之后，我觉得自己对系统更感兴趣。

问：你了解 硬件 ip 吗？

答：不太了解，我只学习过 计算机体系结构方面的知识。


问：我看你的项目有操作系统，为什么又会对芯片感兴趣呢？

答：额，因为不太清楚自己对那个方向感兴趣，所以每个方向都试一下。写完 XV6 这个操作系统相关的 实验后，发现 XV6 这个操作系统不过只是个玩具。
真实的操作系统远比这复杂，我想自己可能不太能在目前非常完善的操作系统里添加什么新的功能，而芯片我感觉相对会好一些。

问：你还报了什么其他学校吗

答：厦大

....(其他问题记不太清楚了)

### 二面

由于一面基本把名额确定下来了，二面的话只要计算所老师觉得还过得去，就不会被刷。

第二次是去计算所线下面试，这次是计算所的老师在面。

首先 2分钟英文自我介绍
    3分钟中文ppt自我介绍

剩下 15min 答辩：(没怎么准备，被问穿了)

问：我看你做了这个 XV6 的E1000 网卡驱动，你能说一下它是怎么交互的吗？

发送包：
1. 准备传输头
2. 协议栈与网卡软件驱动交换，命令驱动发送数据
3. 驱动拿到封装好的帧交给硬件
4. 硬件从 RAM 读取数据后再发送
5. 发送完成后，用中断告知

接受包：
1. 物理层感知到有包发送过来
2. 将数据存储在 FIFO 队列
3. 中断告知
4. 操作系统将数据从 FIFO 队列 转存到 DMA 中
5. 根据 寄存器。


问：假设我写了一个 快速排序，里面有 printf 语句，你能说一下这个程序从编译到运行的全过程吗？越详细越好 (很综合的问题)

答: 因为有 printf 语句，所以一定会有 stdio.h 这个头文件。这样编译器在编译时，会隐式链接一个 包含了 printf 实现的 动态链接库 (其实是静态)，编译器将代码文件编译成 .o 文件后，与动态链接库联合编译为 一个可执行文件。

问：生成可执行文件之后呢？

答：如果运行这个可执行文件的话，如果是 Linux 系统，那么可执行文件应该就是 elf 文件。exec 系统调用 (其实是 execve) 会读取 elf 文件头，据此将 可执行文件的数据加载到对应的用户内存空间，然后从代码段的第一条指令开始执行。

问：再之后呢？

答：(答乱了，开始口糊) 之后就是额 pc 寄存器获取到这个第一条指令，然后开始执行。

问：你再结合一下操作系统的虚拟内存，cache，然后 我看不是也做了 cpu 吗，再结合一下 指令运行的 五个过程讲一下。

答：(虚拟内存忘记了，口糊ing) 首先这个假设是从用户地址空间为0开始执行的，由于是虚拟地址，会首先在 TLB 里查找 虚拟地址对应的映射，
假设一开始 TLB 为空，然后就会发生缺页中断 (这里面试的时候跳步了，TLB 为空后，应该是去页表里找虚拟地址到物理地址的映射，如果页表里还没有，才会发生缺页中断) (面试的时候在这卡住了，老师让我跳过，假设现在已经找到了虚拟地址对应的物理地址。) 如果已经找到了物理地址，那么会首先尝试在 cache 里查找数据, 假设一开始 cache 为空，那么就会发生 cache miss 缓存不命中。接着 操作系统会尝试去内存里找到对应的物理页，物理地址会被解析成几个部分，比如第一部分是有效位，中间一部分是组索引，最后一部分是偏移量，操作系统根据组索引找到物理地址后，再加载到 cache 中。(实际上在cache 里查找的时候才需要将物理地址拆解，如果发生缓存不命中的话，DRAM 直接将数据存入cache) 之后，操作系统再向 cache 请求, 根据偏移量就能够获得数据了。

问：获得数据之后呢？

答：就交给寄存器进行计算

（老师补充：计算完之后 再进行 访存、执行、写回操作是吧）

答：对的

问：为啥你又做系统又做深度学习

答：同一面

问：你能说一下操作系统中断具体是怎样工作的吗?

答：大概结合了下 xv6 的 trap handler. 具体回答忘记了

问：你夏令营也报了计算所吗？

答：对，夏令营报了，导师也填的也是，但是没有入
